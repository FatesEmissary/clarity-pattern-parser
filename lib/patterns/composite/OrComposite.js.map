{"version":3,"sources":["../../../src/patterns/composite/OrComposite.js"],"names":["OrComposite","cursor","index","nodes","node","mark","_reset","_tryPattern","result","_children","parse","CompositeNode","name","startIndex","endIndex","children","push","error","length","moveToMark","stack","StackInformation","CompositePattern"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;IAEqBA,W;;;;;;;;;;;;;2BACZC,M,EAAQ;AACb,WAAKA,MAAL,GAAc,IAAd;AACA,WAAKC,KAAL,GAAa,CAAb;AACA,WAAKC,KAAL,GAAa,EAAb;AACA,WAAKC,IAAL,GAAY,IAAZ;;AAEA,UAAIH,MAAM,IAAI,IAAd,EAAoB;AAClB,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKI,IAAL,GAAY,KAAKJ,MAAL,CAAYI,IAAZ,EAAZ;AACD;AACF;;;0BAEKJ,M,EAAQ;AACZ,WAAKK,MAAL,CAAYL,MAAZ;;AACA,WAAKM,WAAL;;AAEA,aAAO,KAAKH,IAAZ;AACD;;;kCAEa;AACZ,aAAO,IAAP,EAAa;AACX,YAAMC,IAAI,GAAG,KAAKJ,MAAL,CAAYI,IAAZ,EAAb;;AAEA,YAAI;AACF,cAAMG,MAAM,GAAG,KAAKC,SAAL,CAAe,KAAKP,KAApB,EAA2BQ,KAA3B,CAAiC,KAAKT,MAAtC,CAAf;;AAEA,eAAKG,IAAL,GAAY,IAAIO,sBAAJ,CACV,KAAKC,IADK,EAEVJ,MAAM,CAACK,UAFG,EAGVL,MAAM,CAACM,QAHG,CAAZ;AAKA,eAAKV,IAAL,CAAUW,QAAV,CAAmBC,IAAnB,CAAwBR,MAAxB;AAEA;AACD,SAXD,CAWE,OAAOS,KAAP,EAAc;AACd,cAAI,KAAKf,KAAL,GAAa,CAAb,GAAiB,KAAKO,SAAL,CAAeS,MAApC,EAA4C;AAC1C,iBAAKjB,MAAL,CAAYkB,UAAZ,CAAuBd,IAAvB;AACA,iBAAKH,KAAL;AACD,WAHD,MAGO;AACLe,YAAAA,KAAK,CAACG,KAAN,CAAYJ,IAAZ,CAAiB,IAAIK,yBAAJ,CAAqB,KAAKhB,IAA1B,EAAgC,IAAhC,CAAjB;AACA,kBAAMY,KAAN;AACD;AACF;AACF;AACF;;;4BAEO;AACN,aAAO,IAAIjB,WAAJ,CAAgB,KAAKY,IAArB,EAA2B,KAAKH,SAAhC,CAAP;AACD;;;;EAjDsCa,0B","sourcesContent":["import CompositePattern from \"./CompositePattern.js\";\nimport CompositeNode from \"../../ast/CompositeNode.js\";\nimport StackInformation from \"../StackInformation.js\";\n\nexport default class OrComposite extends CompositePattern {\n  _reset(cursor) {\n    this.cursor = null;\n    this.index = 0;\n    this.nodes = [];\n    this.node = null;\n\n    if (cursor != null) {\n      this.cursor = cursor;\n      this.mark = this.cursor.mark();\n    }\n  }\n\n  parse(cursor) {\n    this._reset(cursor);\n    this._tryPattern();\n\n    return this.node;\n  }\n\n  _tryPattern() {\n    while (true) {\n      const mark = this.cursor.mark();\n\n      try {\n        const result = this._children[this.index].parse(this.cursor);\n\n        this.node = new CompositeNode(\n          this.name,\n          result.startIndex,\n          result.endIndex\n        );\n        this.node.children.push(result);\n\n        break;\n      } catch (error) {\n        if (this.index + 1 < this._children.length) {\n          this.cursor.moveToMark(mark);\n          this.index++;\n        } else {\n          error.stack.push(new StackInformation(this.mark, this));\n          throw error;\n        }\n      }\n    }\n  }\n\n  clone() {\n    return new OrComposite(this.name, this._children);\n  }\n}\n"],"file":"OrComposite.js"}