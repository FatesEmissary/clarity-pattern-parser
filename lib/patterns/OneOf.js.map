{"version":3,"sources":["../../src/patterns/OneOf.js"],"names":["OneOf","constructor","name","values","min","max","isOptional","cursor","match","Infinity","isOptions","assertValidity","isNullOrEmpty","Error","value","length","isMatch","indexOf","getChar","reset","parse","mark","startIndex","getIndex","hasNext","next","moveToMark","ParseError","endIndex","ValueNode","clone"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,MAAMA,KAAN,CAAY;AACzBC,EAAAA,WAAW,CAACC,IAAD,EAAOC,MAAP,EAAe;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA;AAAZ,MAA2B,EAA1C,EAA8C;AACvD,SAAKJ,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKI,MAAL,GAAc,IAAd;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKH,GAAL,GAAW,OAAOA,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgCI,QAA3C;AACA,SAAKL,GAAL,GAAW,OAAOA,GAAP,KAAe,WAAW,CAA1B,GAA8BA,GAA9B,GAAoC,CAA/C;AACA,SAAKE,UAAL,GAAkB,OAAOI,SAAP,KAAqB,SAArB,GAAiCJ,UAAjC,GAA8C,KAAhE;AAEA,SAAKK,cAAL;AACD;;AAEDA,EAAAA,cAAc,GAAG;AACf,QAAI,KAAKC,aAAL,CAAmB,KAAKT,MAAxB,CAAJ,EAAqC;AACnC,YAAM,IAAIU,KAAJ,CACJ,+EADI,CAAN;AAGD;AACF;;AAEDD,EAAAA,aAAa,CAACE,KAAD,EAAQ;AACnB,WAAOA,KAAK,IAAI,IAAT,IAAiBA,KAAK,CAACC,MAAN,KAAiB,CAAzC;AACD;;AAEDC,EAAAA,OAAO,GAAG;AACR,WAAO,KAAKb,MAAL,CAAYc,OAAZ,CAAoB,KAAKV,MAAL,CAAYW,OAAZ,EAApB,IAA6C,CAAC,CAArD;AACD;;AAEDC,EAAAA,KAAK,CAACZ,MAAD,EAAS;AACZ,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKD,MAAL,GAAcA,MAAd;AACD;;AAEDa,EAAAA,KAAK,CAACb,MAAD,EAAS;AACZ,UAAMc,IAAI,GAAGd,MAAM,CAACc,IAAP,EAAb;AACA,UAAMC,UAAU,GAAGf,MAAM,CAACgB,QAAP,EAAnB;AACA,SAAKJ,KAAL,CAAWZ,MAAX;;AAEA,WAAO,KAAKS,OAAL,MAAkB,KAAKR,KAAL,CAAWO,MAAX,IAAqB,KAAKV,GAAnD,EAAwD;AACtD,WAAKG,KAAL,IAAcD,MAAM,CAACW,OAAP,EAAd;;AACA,UAAIX,MAAM,CAACiB,OAAP,EAAJ,EAAsB;AACpBjB,QAAAA,MAAM,CAACkB,IAAP;AACD,OAFD,MAEO;AACL;AACD;AACF;;AAED,QAAI,KAAKjB,KAAL,CAAWO,MAAX,GAAoB,KAAKX,GAA7B,EAAkC;AAChC,UAAI,KAAKE,UAAT,EAAqB;AACnBC,QAAAA,MAAM,CAACmB,UAAP,CAAkBL,IAAlB;AACA,eAAO,IAAP;AACD;;AACD,YAAM,IAAIM,mBAAJ,CACH,MAAK,KAAKzB,IAAK,0BAAyB,KAAKE,GAAI,qBAD9C,CAAN;AAGD;;AAED,UAAMwB,QAAQ,GAAGN,UAAU,GAAG,KAAKd,KAAL,CAAWO,MAAxB,GAAiC,CAAlD;AACA,WAAO,IAAIc,kBAAJ,CAAc,KAAK3B,IAAnB,EAAyB,KAAKM,KAA9B,EAAqCc,UAArC,EAAiDM,QAAjD,CAAP;AACD;;AAEDE,EAAAA,KAAK,GAAG;AACN,WAAO,IAAI9B,KAAJ,CAAU,KAAKE,IAAf,EAAqB,KAAKC,MAA1B,EAAkC;AACvCC,MAAAA,GAAG,EAAE,KAAKA,GAD6B;AAEvCC,MAAAA,GAAG,EAAE,KAAKA,GAF6B;AAGvCC,MAAAA,UAAU,EAAE,KAAKA;AAHsB,KAAlC,CAAP;AAKD;;AApEwB","sourcesContent":["import ParseError from \"../ParseError.js\";\nimport ValueNode from \"../ast/ValueNode.js\";\n\nexport default class OneOf {\n  constructor(name, values, { min, max, isOptional } = {}) {\n    this.name = name;\n    this.values = values;\n    this.cursor = null;\n    this.match = \"\";\n    this.max = typeof max === \"number\" ? max : Infinity;\n    this.min = typeof min === \"number\" > 0 ? min : 0;\n    this.isOptional = typeof isOptions === \"boolean\" ? isOptional : false;\n\n    this.assertValidity();\n  }\n\n  assertValidity() {\n    if (this.isNullOrEmpty(this.values)) {\n      throw new Error(\n        \"Illegal Argument: Any needs to have a value that has a length greater than 0.\"\n      );\n    }\n  }\n\n  isNullOrEmpty(value) {\n    return value == null || value.length === 0;\n  }\n\n  isMatch() {\n    return this.values.indexOf(this.cursor.getChar()) > -1;\n  }\n\n  reset(cursor) {\n    this.match = \"\";\n    this.cursor = cursor;\n  }\n\n  parse(cursor) {\n    const mark = cursor.mark();\n    const startIndex = cursor.getIndex();\n    this.reset(cursor);\n\n    while (this.isMatch() && this.match.length <= this.max) {\n      this.match += cursor.getChar();\n      if (cursor.hasNext()) {\n        cursor.next();\n      } else {\n        break;\n      }\n    }\n\n    if (this.match.length < this.min) {\n      if (this.isOptional) {\n        cursor.moveToMark(mark);\n        return null;\n      }\n      throw new ParseError(\n        `A '${this.name}' needs to be at least ${this.min} character(s) long.`\n      );\n    }\n\n    const endIndex = startIndex + this.match.length - 1;\n    return new ValueNode(this.name, this.match, startIndex, endIndex);\n  }\n\n  clone() {\n    return new OneOf(this.name, this.values, {\n      min: this.min,\n      max: this.max,\n      isOptional: this.isOptional\n    });\n  }\n}\n"],"file":"OneOf.js"}