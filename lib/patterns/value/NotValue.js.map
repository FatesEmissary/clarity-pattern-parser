{"version":3,"sources":["../../../src/patterns/value/NotValue.js"],"names":["NotValue","name","pattern","_assertArguments","children","ValuePattern","Error","cursor","match","node","mark","_reset","_tryPattern","parse","hasUnresolvedError","resolveError","moveToMark","getChar","_processMatch","length","parseError","ParseError","index","throwError","ValueNode","setIndex","endIndex"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;IAEqBA,Q;;;;;AACnB,oBAAYC,IAAZ,EAAkBC,OAAlB,EAA2B;AAAA;;AAAA;;AACzB,kFAAMD,IAAN,EAAY,CAACC,OAAD,CAAZ;;AACA,UAAKC,gBAAL;;AAFyB;AAG1B;;;;uCAEkB;AACjB,UAAI,EAAE,KAAKC,QAAL,CAAc,CAAd,aAA4BC,sBAA9B,CAAJ,EAAiD;AAC/C,cAAM,IAAIC,KAAJ,CACJ,+DADI,CAAN;AAGD;;AAED,UAAI,OAAO,KAAKL,IAAZ,KAAqB,QAAzB,EAAmC;AACjC,cAAM,IAAIK,KAAJ,CAAU,kDAAV,CAAN;AACD;AACF;;;2BAEMC,M,EAAQ;AACb,WAAKC,KAAL,GAAa,EAAb;AACA,WAAKC,IAAL,GAAY,IAAZ;AACA,WAAKF,MAAL,GAAcA,MAAd;AACA,WAAKG,IAAL,GAAY,KAAKH,MAAL,CAAYG,IAAZ,EAAZ;AACD;;;0BAEKH,M,EAAQ;AACZ,WAAKI,MAAL,CAAYJ,MAAZ;;AACA,WAAKK,WAAL;;AAEA,aAAO,KAAKH,IAAZ;AACD;;;kCAEa;AACZ,aAAO,IAAP,EAAa;AACX,YAAMC,IAAI,GAAG,KAAKH,MAAL,CAAYG,IAAZ,EAAb;AACA,aAAKN,QAAL,CAAc,CAAd,EAAiBS,KAAjB,CAAuB,KAAKN,MAA5B;;AAEA,YAAI,KAAKA,MAAL,CAAYO,kBAAZ,EAAJ,EAAsC;AACpC,eAAKP,MAAL,CAAYQ,YAAZ;AACA,eAAKR,MAAL,CAAYS,UAAZ,CAAuBN,IAAvB;AACA,eAAKF,KAAL,IAAc,KAAKD,MAAL,CAAYU,OAAZ,EAAd;AACA;AACD,SALD,MAKO;AACL,eAAKV,MAAL,CAAYS,UAAZ,CAAuBN,IAAvB;AACA;AACD;AACF;;AAED,WAAKQ,aAAL;AACD;;;oCAEe;AACd,UAAI,KAAKV,KAAL,CAAWW,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,YAAMC,UAAU,GAAG,IAAIC,mBAAJ,4DACmC,KAAKjB,QAAL,CAAc,CAAd,EAAiBH,IADpD,gBAEjB,KAAKS,IAAL,CAAUY,KAFO,EAGjB,IAHiB,CAAnB;AAKA,aAAKf,MAAL,CAAYgB,UAAZ,CAAuBH,UAAvB;AACD,OAPD,MAOO;AACL,aAAKX,IAAL,GAAY,IAAIe,kBAAJ,CACV,KAAKvB,IADK,EAEV,KAAKO,KAFK,EAGV,KAAKE,IAAL,CAAUY,KAHA,EAIV,KAAKZ,IAAL,CAAUY,KAJA,CAAZ;AAOA,aAAKf,MAAL,CAAYkB,QAAZ,CAAqB,KAAKhB,IAAL,CAAUiB,QAA/B;AACD;AACF;;;0BAEKzB,I,EAAM;AACV,UAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,QAAAA,IAAI,GAAG,KAAKA,IAAZ;AACD;;AACD,aAAO,IAAID,QAAJ,CAAaC,IAAb,EAAmB,KAAKG,QAAL,CAAc,CAAd,CAAnB,CAAP;AACD;;;qCAEgB;AACf,aAAO,KAAKM,IAAZ;AACD;;;;EAhFmCL,sB","sourcesContent":["import ValuePattern from \"./ValuePattern.js\";\nimport ValueNode from \"../../ast/ValueNode.js\";\nimport ParseError from \"../ParseError.js\";\n\nexport default class NotValue extends ValuePattern {\n  constructor(name, pattern) {\n    super(name, [pattern]);\n    this._assertArguments();\n  }\n\n  _assertArguments() {\n    if (!(this.children[0] instanceof ValuePattern)) {\n      throw new Error(\n        \"Invalid Arguments: Expected the pattern to be a ValuePattern.\"\n      );\n    }\n\n    if (typeof this.name !== \"string\") {\n      throw new Error(\"Invalid Arguments: Expected name to be a string.\");\n    }\n  }\n\n  _reset(cursor) {\n    this.match = \"\";\n    this.node = null;\n    this.cursor = cursor;\n    this.mark = this.cursor.mark();\n  }\n\n  parse(cursor) {\n    this._reset(cursor);\n    this._tryPattern();\n\n    return this.node;\n  }\n\n  _tryPattern() {\n    while (true) {\n      const mark = this.cursor.mark();\n      this.children[0].parse(this.cursor);\n\n      if (this.cursor.hasUnresolvedError()) {\n        this.cursor.resolveError();\n        this.cursor.moveToMark(mark);\n        this.match += this.cursor.getChar();\n        break;\n      } else {\n        this.cursor.moveToMark(mark);\n        break;\n      }\n    }\n\n    this._processMatch();\n  }\n\n  _processMatch() {\n    if (this.match.length === 0) {\n      const parseError = new ParseError(\n        `Didn't find any characters that didn't match the ${this.children[0].name} pattern.`,\n        this.mark.index,\n        this\n      );\n      this.cursor.throwError(parseError);\n    } else {\n      this.node = new ValueNode(\n        this.name,\n        this.match,\n        this.mark.index,\n        this.mark.index\n      );\n\n      this.cursor.setIndex(this.node.endIndex);\n    }\n  }\n\n  clone(name) {\n    if (typeof name !== \"string\") {\n      name = this.name;\n    }\n    return new NotValue(name, this.children[0]);\n  }\n\n  getCurrentMark() {\n    return this.mark;\n  }\n}\n"],"file":"NotValue.js"}