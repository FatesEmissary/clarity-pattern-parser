{"version":3,"sources":["../../src/patterns/RecursivePattern.js"],"names":["RecursivePattern","name","_climb","parent","pattern","isMatch","cursor","getPattern","ParserError","clonedPattern","clone","parse","Pattern"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;;;;;;;;;;;IAEqBA,gB;;;;;AACnB,4BAAYC,IAAZ,EAAkB;AAAA;;AAAA,yFACVA,IADU;AAEjB;;;;iCAEY;AAAA;;AACX,aAAO,KAAKC,MAAL,CAAY,KAAKC,MAAjB,EAAyB,UAAAC,OAAO,EAAI;AACzC,eAAOA,OAAO,CAACH,IAAR,KAAiB,KAAI,CAACA,IAA7B;AACD,OAFM,CAAP;AAGD;;;2BAEMG,O,EAASC,O,EAAS;AACvB,UAAIA,OAAO,CAACD,OAAD,CAAX,EAAsB;AACpB,eAAOA,OAAP;AACD,OAFD,MAEO;AACL,YAAIA,OAAO,CAACD,MAAR,IAAkB,IAAtB,EAA4B;AAC1B,iBAAO,KAAKD,MAAL,CAAYE,OAAO,CAACD,MAApB,EAA4BE,OAA5B,CAAP;AACD;;AACD,eAAO,IAAP;AACD;AACF;;;0BAEKC,M,EAAQ;AACZ,UAAMF,OAAO,GAAG,KAAKG,UAAL,EAAhB;;AAEA,UAAIH,OAAO,IAAI,IAAf,EAAqB;AACnB,cAAM,IAAII,mBAAJ,4EACgE,KAAKP,IADrE,OAAN;AAGD;;AACD,UAAMQ,aAAa,GAAGL,OAAO,CAACM,KAAR,EAAtB;AACAD,MAAAA,aAAa,CAACN,MAAd,GAAuB,IAAvB;AAEA,aAAOM,aAAa,CAACE,KAAd,CAAoBL,MAApB,CAAP;AACD;;;4BAEM;AACH,aAAO,IAAIN,gBAAJ,CAAqB,KAAKC,IAA1B,CAAP;AACH;;;;EAtC2CW,iB","sourcesContent":["import Pattern from \"./Pattern.js\";\nimport ParserError from \"./ParseError.js\";\n\nexport default class RecursivePattern extends Pattern {\n  constructor(name) {\n    super(name);\n  }\n\n  getPattern() {\n    return this._climb(this.parent, pattern => {\n      return pattern.name === this.name;\n    });\n  }\n\n  _climb(pattern, isMatch) {\n    if (isMatch(pattern)) {\n      return pattern;\n    } else {\n      if (pattern.parent != null) {\n        return this._climb(pattern.parent, isMatch);\n      }\n      return null;\n    }\n  }\n\n  parse(cursor) {\n    const pattern = this.getPattern();\n\n    if (pattern == null) {\n      throw new ParserError(\n        `Couldn't find parent pattern to recursively parse, with the name ${this.name}.`\n      );\n    }\n    const clonedPattern = pattern.clone();\n    clonedPattern.parent = this;\n\n    return clonedPattern.parse(cursor);\n  }\n\n  clone(){\n      return new RecursivePattern(this.name);\n  }\n}\n"],"file":"RecursivePattern.js"}