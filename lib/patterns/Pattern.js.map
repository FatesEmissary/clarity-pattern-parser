{"version":3,"sources":["../../src/patterns/Pattern.js"],"names":["Pattern","type","name","_type","_name","_parent","_children","_assertName","Error","string","cursor","Cursor","node","parse","didSuccessfullyParse","exec","Array","isArray","areAllPatterns","every","pattern","length","forEach","child","parent","value","_assertChildren","_assignAsParent","map","clone","Object","freeze"],"mappings":";;;;;;;AAAA;;;;;;;;;;IAEqBA,O;;;AACnB,qBAAsC;AAAA,QAA1BC,IAA0B,uEAAnB,IAAmB;AAAA,QAAbC,IAAa,uEAAN,IAAM;;AAAA;;AACpC,SAAKC,KAAL,GAAaF,IAAb;AACA,SAAKG,KAAL,GAAaF,IAAb;AACA,SAAKG,OAAL,GAAe,IAAf;AACA,SAAKC,SAAL,GAAiB,EAAjB;;AAEA,SAAKC,WAAL;AACD;;;;kCAEa;AACZ,UAAI,OAAO,KAAKL,IAAZ,KAAqB,QAAzB,EAAmC;AACjC,cAAM,IAAIM,KAAJ,CACJ,kEADI,CAAN;AAGD;AACF;;;4BAEO;AACN,YAAM,IAAIA,KAAJ,CAAU,wBAAV,CAAN;AACD;;;yBAEIC,M,EAAQ;AACX,UAAMC,MAAM,GAAG,IAAIC,eAAJ,CAAWF,MAAX,CAAf;AACA,UAAMG,IAAI,GAAG,KAAKC,KAAL,CAAWH,MAAX,CAAb;;AAEA,UAAIA,MAAM,CAACI,oBAAP,EAAJ,EAAmC;AACjC,eAAOF,IAAP;AACD,OAFD,MAEO;AACL,eAAO,IAAP;AACD;AACF;;;yBAEIH,M,EAAQ;AACX,aAAO,KAAKM,IAAL,CAAUN,MAAV,KAAqB,IAA5B;AACD;;;sCAiCiB;AAChB,UAAI,CAACO,KAAK,CAACC,OAAN,CAAc,KAAKX,SAAnB,CAAL,EAAoC;AAClC,cAAM,IAAIE,KAAJ,CACJ,2EADI,CAAN;AAGD;;AAED,UAAMU,cAAc,GAAG,KAAKZ,SAAL,CAAea,KAAf,CACrB,UAAAC,OAAO;AAAA,eAAIA,OAAO,YAAYpB,OAAvB;AAAA,OADc,CAAvB;;AAIA,UAAI,CAACkB,cAAL,EAAqB;AACnB,cAAM,IAAIV,KAAJ,CACJ,mEADI,CAAN;AAGD;;AAED,UAAI,KAAKF,SAAL,CAAee,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,cAAM,IAAIb,KAAJ,CACJ,iFADI,CAAN;AAGD;AACF;;;sCAEiB;AAAA;;AAChB,WAAKF,SAAL,CAAegB,OAAf,CAAuB,UAAAC,KAAK;AAAA,eAAKA,KAAK,CAACC,MAAN,GAAe,KAApB;AAAA,OAA5B;AACD;;;4BAEO;AACN,YAAM,IAAIhB,KAAJ,CAAU,wBAAV,CAAN;AACD;;;wBA7DU;AACT,aAAO,KAAKJ,KAAZ;AACD;;;wBAEU;AACT,aAAO,KAAKD,KAAZ;AACD;;;wBAEY;AACX,aAAO,KAAKE,OAAZ;AACD,K;sBAEUoB,K,EAAO;AAChB,UAAIA,KAAK,YAAYzB,OAArB,EAA8B;AAC5B,aAAKK,OAAL,GAAeoB,KAAf;AACD;AACF;;;wBAEc;AACb,aAAO,KAAKnB,SAAZ;AACD,K;sBAEYmB,K,EAAO;AAClB,WAAKnB,SAAL,GAAiBmB,KAAjB;;AACA,WAAKC,eAAL;;AACA,WAAKC,eAAL;;AAEA,WAAKrB,SAAL,GAAiBmB,KAAK,CAACG,GAAN,CAAU,UAAAR,OAAO;AAAA,eAAIA,OAAO,CAACS,KAAR,EAAJ;AAAA,OAAjB,CAAjB;AACAC,MAAAA,MAAM,CAACC,MAAP,CAAc,KAAKzB,SAAnB;AACD","sourcesContent":["import Cursor from \"../Cursor.js\";\n\nexport default class Pattern {\n  constructor(type = null, name = null) {\n    this._type = type;\n    this._name = name;\n    this._parent = null;\n    this._children = [];\n\n    this._assertName();\n  }\n\n  _assertName() {\n    if (typeof this.name !== \"string\") {\n      throw new Error(\n        \"Invalid Argument: Patterns needs to have a name that's a string.\"\n      );\n    }\n  }\n\n  parse() {\n    throw new Error(\"Method Not Implemented\");\n  }\n\n  exec(string) {\n    const cursor = new Cursor(string);\n    const node = this.parse(cursor);\n\n    if (cursor.didSuccessfullyParse()) {\n      return node;\n    } else {\n      return null;\n    }\n  }\n\n  test(string) {\n    return this.exec(string) != null;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  set parent(value) {\n    if (value instanceof Pattern) {\n      this._parent = value;\n    }\n  }\n\n  get children() {\n    return this._children;\n  }\n\n  set children(value) {\n    this._children = value;\n    this._assertChildren();\n    this._assignAsParent();\n\n    this._children = value.map(pattern => pattern.clone());\n    Object.freeze(this._children);\n  }\n\n  _assertChildren() {\n    if (!Array.isArray(this._children)) {\n      throw new Error(\n        \"Invalid Arguments: The patterns argument need to be an array of Patterns.\"\n      );\n    }\n\n    const areAllPatterns = this._children.every(\n      pattern => pattern instanceof Pattern\n    );\n\n    if (!areAllPatterns) {\n      throw new Error(\n        \"Invalid Argument: All patterns need to be an instance of Pattern.\"\n      );\n    }\n\n    if (this._children.length < 2) {\n      throw new Error(\n        \"Invalid Argument: Composite Patterns needs to have more than one value pattern.\"\n      );\n    }\n  }\n\n  _assignAsParent() {\n    this._children.forEach(child => (child.parent = this));\n  }\n\n  clone() {\n    throw new Error(\"Method Not Implemented\");\n  }\n}\n"],"file":"Pattern.js"}